# 黎曼 (Riemann) 积分的定义与可积性

## 概述

黎曼积分的构造分为三个部分：**分划**，**取点**，**取极限** 

形象地，我们期待一个函数的积分等于其与横坐标轴围成的面积。欲求得这部分的面积，可使用微元求和的思想，也即将整个函数面积分划成若干小长条，每个小长条的面积近似为长方形面积，然后直接底乘高求得部分面积再累加

由此，我们对已知区间 $[a,b]$ 构造分划：
$$
\Delta:\ a=x_{0}<x_{1}<\dots<x_n=b,\ \Delta x_k = x_k - x_{k - 1}
$$
那么整个的面积应该大约是这样的：
$$
S=\sum_{k=1}^nf(\xi_k)\Delta x_k
$$
接下来，我们期待这样的性质：
1. 只要 **分划足够细**，也即长条面积切的足够小，我们就能够足够好地逼近真实的面积
2. **取点的方式** 不能影响最终结果，也即，不论我取小区间端点，取小区间平均值，抑或是胡乱取点，最终逼近出的面积应该相同
3. **分划的方式** 不能影响最终结果，也即，不论我取哪些分划，只要保证分划的足够细，那么逼近出的面积应该相同

非严格地，如果满足上面的性质，我们认为这样的积分是存在的

### 分划

如何保证分划足够细？

>[!error] 错误的朴素想法
>一个通常的朴素想法是让这些分划的长度的平均值趋近于零。但是这显然是不对的。假如我只在区间的左半部分切，然后切的足够多也足够细，右半边不切，最终也一定可以使平均值趋于零。这说明平均值不能衡量分划的细致程度

自然的正确想法是，可以要求分划的**长度最大值**尽量的小。于是有以下定义：

>[!note] 定义：分划的模
>对于一个分划，定义：$$|\Delta|=\max_{\Delta x_i\in \Delta}\Delta x_i$$

如果保证分划的模趋于零，则分划必定是足够细的

### 取点无关

如何保证最后算出来的面积与取点的方式无关？也即，我取任一区间中的点，在同样的分划下，最后逼近的面积相同？

联系 [[闭区间套定理#例子 2.1 对于非单调序列的控制手法]] 处理时的构造，我们可以类似地构造：**达布上和** 以及 **达布下和**

>[!note] 定义：达布 (Darboux) 和
>对于给定的分划 $\Delta$，定义 **达布上和** $$S(f,\Delta)=\sum_{k=1}^n\sup_{[x_{k-1}, x_k]}f(x)\Delta x_k$$类似地，定义 **达布下和**$$s(f,\Delta)=\sum_{k=1}^n\inf_{[x_{k-1}, x_k]}f(x)\Delta x_k$$

可以这样形象的理解达布和：
达布下和是总面积的 **不足近似值**，而达布上和是总面积的 **过剩近似值** 

对于一个确定的函数 $f$，达布和去除了取点的影响，也即达布和对于取点是无关的，也即达布和是一个关于分划的函数。

### 分划无关

下面想要继续排除分划对于面积的影响。直观上想，对于可积函数，只要分划是足够细的，也即分划的模足够小，达布和就应该能够足够逼近真实的面积。于是想要我们期待证明以下两个性质：

1. 达布和收敛
2. 黎曼可积的充分必要条件是达布上和的极限等于达布下和的极限

首先，假设达布和收敛，先直观地考虑第二条：一方面考虑必要性，如果取点无关，必然有上和下和极限相等。另一方面考虑充分性，如果上和下和极限相等，则由夹逼定理，必有取点无关。于是上和下和极限相等是充分必要条件。

下面证明达布和收敛

#### 直观的方法：使用单调收敛原理

首先，直观上想，如果分划的越来越细，达布下和（总面积的不足近似）应该会越来越大，达布上和（总面积的过剩近似）应该越来越小。也即可以这样理解：把达布和认为是分划的函数，并将分划按照模的大小排列，让分划越来越小。于是达布和应该是一个关于分划的 **单调函数**。对于一个单调函数，我们想要证明收敛，显然想到方法：[[单调收敛原理]]，于是我们想要证明达布和 **有界** 

这里的证明需要引理：**黎曼可积的必要条件是函数有界**，这在可积函数性质部分证明

首先需要引人一个定义，方便说话：

>[!note] 定义：振幅
>记函数 $f$ 在某个区间 $[a,b]$ 的振幅 $\omega$ 为：$$\omega=\sup_{[a,b]}f(x)-\inf_{[a,b]}f(x)$$

先证：达布和有界。首先注意到达布下和肯定小于达布上和，于是只需要证明达布上和有上界，并且达布下和有下界，即可证明全部达布和有界。
$$
\begin{align}
S(f,\Delta)&=\sum_{k=1}^n\sup_{[x_{k-1}, x_k]}f(x)\Delta x_k \\
&\leq \sup_{[a,b]}f(x)\sum_{k=1}^n\Delta x_k \\
&=\sup_{[a,b]}f(x)|\Delta|
\end{align}
$$
由于可积函数必然有界，于是有上界。达布下和有下界的情形是类似的。

下面证明达布和是单调的。

由于 $\mathcal P_{n+1}$ 是 $\mathcal P_n$ 的加细分割，对任一区间细分前后的上、下确界有
$$
\sup_{\text{细分区间}} f \le \sup_{\text{原区间}} f,
\qquad
\inf_{\text{细分区间}} f \ge \inf_{\text{原区间}} f.
$$
对所有子区间求和，得到
$$
U_{n+1} \le U_n, \qquad L_{n+1} \ge L_n.
$$
因此 $(U_n)$ 单调不增，$(L_n)$ 单调不减。

于是证明了达布和收敛

## 黎曼可积的充分必要条件

### 充要条件 1 达布和相等

概述部分已经进行了比较充分的说明，下面给出严格的表述：

>[!note] 充要条件 1 达布和相等
>$f(x)\in R[a,b]$ 等价于：$$\lim_{ |\Delta| \to 0 } \sum M_k\Delta x_k = \lim_{ |\Delta| \to 0 } \sum m_k\Delta x_k$$

### 充要条件 2 振幅面积和趋于零

其实把充要条件 1 等号左右移项，就能得到充要条件 2 

联系到之前定义的振幅的概念，有：

>[!note] 充要条件 2 振幅面积和趋于零
>$$\lim_{ |\Delta| \to 0 } \sum_{\Delta}\omega_k\Delta x_k=0$$

这有很好的几何意义：曲线能够由面积和趋于零的小矩形覆盖


